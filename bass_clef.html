<html>

<head>
    <title>Bass Clef</title>
    <link rel="icon" href="favicon.png">
    <link rel="stylesheet" href="style.css">
</head>

<script src="main.js"></script>
<style>

.piano {
    position:relative;
}

.key_white {
    height:170px;
    width:30px;
    background-color:white;
    border:2px solid black;
    display:block;
    float:left;
}

.key_white:hover {
    background-color:rgb(112, 122, 165);
}

.key_black:hover {
    background-color:rgb(112, 122, 165);
}

.black_keys_C {
    position:absolute;
    left:10px;
}

.black_keys_F {
    position:absolute;
    left:112px;
}

.key_black {
    height:100px;
    width:16px;
    background-color:black;
    border:2px solid black;
    display:block;
    float:left;
    margin-left:14px;

}

</style>

<body>
    <!-- #region Header -->
    <div class="headerCircle1">
        <div class="headerCircle2_1"></div>
        <div class="headerCircle2_2"></div>
        <div class="headerCircle3_1"></div>
        <div class="headerCircle3_2"></div>
        <div class="mNote1 invisible_hi">&#9835;</div>
        <div class="mNote2 invisible_hi">&#119136;</div>
    </div>
    <h1>Zach Tong</h1> <br>
    <div class="header_bin">
        <img src="tall.png" class="header_image clickable" width="120px" height="120px" onclick="danceClick()" oncontextmenu="caterpie()"> 
        <audio id="danceMusic" src="sounds/dance.mp3"></audio>
    </div>
    <br><br>
    <ul class="navbar"> 
        <li> <a href="index.html"> Main </a> </li>
        <li class="current_page"> 
            <a href="posts.html">Posts</a>
            <div class="triangle"></div> 
        </li> 
        <li> <a href="games.html">Games</a></li> 
    </ul>
    <!-- #endregion -->

    <h2>Bass Clef Flashcards</h2>

    <img id="image1">

    <br><br>
    <div class="piano"> 
        <div class="key_white C" onclick="pressC()"></div> <!--C-->
        <div class="key_white D" onclick="pressD()"></div> <!--D-->

        <div class="black_keys_C">
            <div class="key_black"></div>
            <div class="key_black"></div>
        </div>

        <div class="key_white E" onclick="pressE()"></div> <!--E-->
        <div class="key_white F" onclick="pressF()"></div> <!--F-->
        <div class="key_white G" onclick="pressG()"></div> <!--G-->
        <div class="key_white A" onclick="pressA()"></div> <!--A-->
        <div class="key_white B" onclick="pressB()"></div> <!--B-->

        <div class="black_keys_F">
            <div class="key_black"></div>
            <div class="key_black"></div>
            <div class="key_black"></div>
        </div>

    </div>

    <div style="margin-left:280px;font-size:22px;">
        <div id="score">Score: 0</div>
        <div id="past">Past time: 0 sec</div>
        <div id="timer">Average time: 0 sec</div>
    </div>
        
</body>

<script>

    var array1 = [
    '2_1_C2',
    '2_2_D2',
    '2_3_E2',
    '2_4_F2',
    '2_5_G2',
    '2_6_A2',
    '2_7_B2',
    '3_1_C3',
    '3_2_D3',
    '3_3_E3',
    '3_4_F3',
    '3_5_G3',
    '3_6_A3',
    '3_7_B3',
    '4_1_C4',
    '4_2_D4',
    '4_3_E4',
    '4_4_F4',
    '4_5_G4'
    ];
    var pressedNote = 'string';
    var arrayIndex = 0;
    var score = 0;
    var counter = 0;
    var avgTimeArray = [];
    var avgTimeArrayIndex = 0;

    array1.sort(() => Math.random() - 0.5);
    console.log(array1);
    console.log(array1[arrayIndex][4]);


    var image1 = document.getElementById('image1');
    image1.src = "bassClef/images/bass/"+array1[arrayIndex]+".png";

    var scoreE = document.getElementById('score');
    var timerE = document.getElementById('timer');
    var pastE = document.getElementById('past');
    var sum = 0;

    //#region
    function pressC() {
        pressedNote = 'C';
        var audio = new Audio("bassClef/sounds/C4.mp3");
        audio.play();
        check();        
    }
    function pressD() {
        pressedNote = 'D';
        var audio = new Audio("bassClef/sounds/D4.mp3");
        audio.play();
        check();        
    }
    function pressE() {
        pressedNote = 'E';
        var audio = new Audio("bassClef/sounds/E4.mp3");
        audio.play();
        check();        
    }
    function pressF() {
        pressedNote = 'F';
        var audio = new Audio("bassClef/sounds/F4.mp3");
        audio.play();
        check();        
    }
    function pressG() {
        pressedNote = 'G';
        var audio = new Audio("bassClef/sounds/G4.mp3");
        audio.play();
        check();        
    }
    function pressA() {
        pressedNote = 'A';
        var audio = new Audio("bassClef/sounds/A4.mp3");
        audio.play();
        check();        
    }
    function pressB() {
        pressedNote = 'B';
        var audio = new Audio("bassClef/sounds/B4.mp3");
        audio.play();
        check();        
    }
    //#endregion

    function check() {
        
        if (pressedNote == array1[arrayIndex][4]) {

            if (arrayIndex<array1.length-1) {
                arrayIndex +=1;
            }
            else {
                array1.sort(() => Math.random() - 0.5);
                arrayIndex = 0;
            }
            
            image1.src = "bassClef/images/bass/"+array1[arrayIndex]+".png";
            console.log(array1[arrayIndex][4]);
            score += 1;
            scoreE.textContent = 'Score: '+score;

            clearInterval(timer);
            pastE.textContent = 'Past time: '+(counter*0.01).toFixed(2) +' sec';
            avgTimeArray[avgTimeArrayIndex] = counter*0.01;
            avgTimeArrayIndex += 1;
            console.log(avgTimeArray);
            sum = 0;
            for (let i=0; i<avgTimeArray.length; i++) {
                sum += avgTimeArray[i];
            }
            sum = (sum/avgTimeArray.length).toFixed(2);
            timerE.textContent = 'Average time: '+sum +' sec';
            counter = 0;
            timer = setInterval(function() {counter +=1;}, 10);
        }
        
        
    }

    var timer = setInterval(function() {counter +=1;}, 10);

</script>

</html>